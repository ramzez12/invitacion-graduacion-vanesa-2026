---
// DespedidaGraduacion.astro
---

<section class="py-2 px-4 relative overflow-hidden ">
  <div class="max-w-3xl mx-auto text-center relative">
    
    <div class="relative" id="contenedor-despedida">
      
      <div class="flex justify-center mb-6" id="icono-graduacion">
        <!-- <div class="relative p-[3px] bg-gradient-to-br from-[#D4AF37] via-[#F4D03F] to-[#D4AF37] rounded-full shadow-lg">
          <div class="w-20 h-20 md:w-28 md:h-28 rounded-full bg-white flex items-center justify-center overflow-hidden">
             <svg class="w-12 h-12 md:w-16 md:h-16 text-[#7A8980]" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 3L1 9l11 6 9-4.91V17h2V9L12 3z"/>
              <path d="M3.88 10.59L12 15l8.12-4.41V12h2V9l-10-5.5-10 5.5v3h2v-1.41z" opacity=".4"/>
            </svg>
          </div> -->
        </div>
      </div>

      <div class="space-y-6" id="bloque-texto-graduada">
        <h2 class="font-charm text-3xl md:text-4xl text-[#D4AF37] font-bold tracking-wide">
          Un Sueño Cumplido
        </h2>
        
        <div class="w-20 h-[2px] bg-gradient-to-r from-transparent via-[#D4AF37] to-transparent mx-auto"></div>

        <p class="font-charm text-xl md:text-2xl text-[#7A8980] leading-relaxed px-4">
          Este logro es el fruto de años de esfuerzo constante, noches de incertidumbre y desafíos superados con perseverancia. Nada de esto habría sido posible sin el amor, la guía y la paciencia inquebrantable de mis padres, ni sin el apoyo sincero de todas las personas que creyeron en mí y me acompañaron en cada paso. Hoy celebro no solo un título, sino la fuerza que nace del compromiso, la constancia y de quienes hicieron que este sueño fuera posible.
        </p>

        <div class="pt-8" id="seccion-confirmar-graduada">
          <p class="font-charm text-xl md:text-2xl text-[#D4AF37] font-bold mb-6">
            Por favor, confirma tu asistencia para celebrar juntos
          </p>

          <div class="flex justify-center">
            <a
              href="https://wa.me/59174032261?text=Me%20complace%20confirmar%20mi%20asistencia%20a%20la%20graduaci%C3%B3n%20de%20Vanesa%20para%20el%20viernes%2016%20de%20enero,%20estar%C3%A9%20sin%20falta." 
              target="_blank" 
              rel="noopener noreferrer"
              class="inline-flex items-center gap-2 bg-[#7A8980] text-white font-sans font-medium py-3 px-10 rounded shadow-md transition-all duration-300 hover:bg-[#D4AF37] hover:scale-105 tracking-wide text-sm uppercase"
            >
              <svg 
                xmlns="http://www.w3.org/2000/svg" 
                width="20" 
                height="20" 
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                stroke-width="2" 
                stroke-linecap="round" 
                stroke-linejoin="round" 
                class="icon icon-tabler icons-tabler-outline icon-tabler-brand-whatsapp"
              >
                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                <path d="M3 21l1.65 -3.8a9 9 0 1 1 3.4 2.9l-5.05 .9" />
                <path d="M9 10a.5 .5 0 0 0 1 0v-1a.5 .5 0 0 0 -1 0v1a5 5 0 0 0 5 5h1a.5 .5 0 0 0 0 -1h-1a.5 .5 0 0 0 0 1" />
              </svg>
              
              Confirmar Asistencia
            </a>
          </div>
        </div>

        <p class="font-charm pt-10 text-2xl md:text-3xl text-[#7A8980] font-bold" id="frase-espera">
          ¡Te espero con mucha alegría!
        </p>
      </div>

      <!-- Flores al final, volteadas verticalmente -->
      <div id="flores-abajo" class="relative mt-4 w-full max-w-[1200px] mx-auto z-20 pointer-events-none">
        <img 
          src="/imagenes/floresarriba.webp" 
          alt="Decoración floral inferior" 
          class="w-full h-auto max-h-[150px] sm:max-h-[200px] md:max-h-[250px] object-contain object-bottom transform scale-y-[-1]" 
        />
      </div>

    </div>
  </div>
  
</section>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";
  
  gsap.registerPlugin(ScrollTrigger);

  if (typeof window !== "undefined") {
    document.addEventListener("DOMContentLoaded", () => {
      // Estado inicial (Ocultos)
      gsap.set(["#icono-graduacion", "#bloque-texto-graduada", "#seccion-confirmar-graduada", "#frase-espera"], { 
        opacity: 0, 
        y: 30 
      });

      // Animación que solo ocurre UNA VEZ al bajar (once: true)
      ScrollTrigger.create({
        trigger: "#contenedor-despedida",
        start: "top 80%",
        once: true, // Esto hace que la animación no se repita al subir y bajar
        onEnter: () => {
          const tl = gsap.timeline();
          
          tl.to("#icono-graduacion", {
            opacity: 1,
            y: 0,
            duration: 1,
            ease: "back.out(1.5)"
          })
          .to("#bloque-texto-graduada", {
            opacity: 1,
            y: 0,
            duration: 0.8,
            ease: "power2.out"
          }, "-=0.4")
          .to("#seccion-confirmar-graduada", {
            opacity: 1,
            y: 0,
            duration: 0.8,
            ease: "power2.out"
          }, "-=0.3")
          .to("#frase-espera", {
            opacity: 1,
            y: 0,
            duration: 1,
            ease: "power2.out"
          }, "-=0.2");
        }
      });
    });
  }
</script>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Charm:wght@400;700&family=Inter:wght@400;500;600&display=swap');
  
  .font-charm { font-family: 'Charm', cursive; }
  .font-sans { font-family: 'Inter', sans-serif; }
</style>